services:
  bind:
    image: localhost/bind9:latest
    ports:
      - 53:53/udp
      - 53:53/tcp
      - 127.0.0.1:953:953/tcp
    environment:
      DEBUG: true
      OCTODNS_KEY_FILE: /var/run/secrets/octodns.key
      NS_FORWARDERS: 1.1.1.1
      NS_SERVER_ROLE: primary
      NS_SERVER_COUNT: 1
      NS_SERVER_1_ADDR: 10.10.100.96
      NS_SERVER_2_ADDR: 192.168.131.151
      AVAILABLE_ZONES: sorakh.local,terra.sorakh.one
    volumes:
      - config:/etc/bind
      - zones:/var/lib/bind
      - cache:/var/cache/bind
      - logs:/var/log
    secrets:
      - octodns.key

secrets:
  octodns.key:
    file: octodns.key

volumes:
  config:
  zones:
  cache:
  logs:
